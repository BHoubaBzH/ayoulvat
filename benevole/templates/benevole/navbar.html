<!-- benevole/navbar.html -->
{% load bootstrap5 %}
<form id="nav_bar" method='GET'>
  {% csrf_token %}
</form>
  <nav class="navbar sticky-top navbar-dark sticky-top bg-dark flex-md-nowrap shadow">

    <ul class="navbar-nav px-2">
      <li class="nav-item text-nowrap">
        <span class="navbar-brand">
          {% if Evenement %}
            {% if Evenement.vignette %}<img src="{{ Evenement.vignette.url }}" style="max-width: 40px;max-height: 40px;">{% endif %}
            {% if Administrateur or Organisateur %}<a class="ms-1" href="{% url 'liste_evenements' %}">{{ Association.nom }}</a>{% endif %}
              {%if Evenement.nom%}<a class="ms-1 text-white text-decoration-none"> {% if Administrateur or Organisateur%}<i class="bi bi-chevron-right"></i>{% endif %} {{ Evenement.nom }}</a>{%endif%}
          {% elif Association %}
            <a  href="{% url 'detail_asso' uuid_asso=Association.UUID %}" data-bs-original-title="{{Text.nav_asso_details}}" 
              data-bs-toggle="tooltip" data-bs-html="true" data-bs-placement="bottom">
              {{ Association.nom|upper }}</a>
          {% else %}
            AYOULVAT
          {% endif %}
        </span>
      </li>
    </ul>
      
    {% if user.is_authenticated %}
      {% if Administrateur or Organisateur or Responsable%}
        <ul class="navbar-nav px-2">
          <li class="nav-item text-nowrap">
            <a class="nav-link"> 
            {% if Administrateur %}
              <font color="Red">{{Text.administrator}}</font></a>
            {% elif Organisateur %}
              <font color="OrangeRed">{{Text.organiser}}</font></a>
            {% elif Responsable %}
              <font color="Orange">{{Text.responsible}}</font>
            {% endif %}
            </a>
          </li>
        </ul>
      {% endif %}
      <ul class="navbar-nav px-2">
        <li class="nav-item text-nowrap">
          <a class="nav-link">{{Text.welcome}} {%if request.user.first_name%}{{ request.user.first_name|capfirst }}{%endif%}</a>
        </li>
      </ul>

      <ul class="navbar-nav px-2">
        <li class="nav-item text-nowrap">
          {# si l evenment est bloqué ou pas ouvert aux inscriptions , on affiche#}
          {% now "Y-m-d" as aujourdhui %}
          {% if Evenement and not Evenement.editable %}
            <div class="btn-group me-2">
              <button type="submit" id="profile" class="btn btn-sm btn-outline-danger"
                formaction=""
                data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{Text.evt_blocked_h}}">
                {{Text.evt_blocked}}</button>
            </div>
          {# si l evenment est terminé , on affiche#}
          {% elif Evenement and aujourdhui > Evenement.fin|date:"Y-m-d" %}
            <div class="btn-group me-2">
              <button type="submit" id="profile" class="btn btn-sm btn-outline-danger"
                formaction=""
                data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{Text.evt_ended_h}}">
                {{Text.evt_ended}}</button>
            </div>
          {# si les inscriptions à l evenements n ont pas commencees , on affiche#}
          {% elif Evenement and EvtOuvertBenevoles|stringformat:"s" == '0'%}
            <div class="btn-group me-2">
              <button type="submit" id="profile" class="btn btn-sm btn-outline-warning"
                formaction="{% url 'evenement' uuid_evenement=Evenement.UUID %}"
                data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{Text.enrolments_tocome_h}} {{Evenement.inscription_debut}}">
                {{Text.enrolments_tocome}}</button>
            </div>
          {# si les inscriptions à l evenements sont en cours , on affiche#}
          {% elif Evenement and EvtOuvertBenevoles|stringformat:"s" == '1'%}
            <div class="btn-group me-2">
              <button type="submit" id="profile" class="btn btn-sm btn-outline-success"
                formaction="{% url 'evenement' uuid_evenement=Evenement.UUID %}"
                data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{Text.enrolments_ongoing_h}} {{Evenement.inscription_fin}}">
                {{Text.enrolments_ongoing}} <b>{{Evenement.inscription_fin}}</b></button>
            </div>
          {# si les inscriptions à l evenements sont terminees , on affiche#}
          {% elif Evenement and EvtOuvertBenevoles|stringformat:"s" == '2'%}
            <div class="btn-group me-2">
              <button type="submit" id="profile" class="btn btn-sm btn-outline-danger"
                formaction="{% url 'evenement' uuid_evenement=Evenement.UUID %}"
                data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{Text.enrolments_ended_h}} {{Evenement.inscription_fin}}">
                {{Text.enrolments_ended}}</button>
            </div>
          {% endif %}
        </li>
      </ul>

      <ul class="navbar-nav px-2">
        {% comment "exemple menu déroulant" %}
          <li class="nav-item dropdown">
              <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle" id="dropdownMenu" data-bs-toggle="dropdown" aria-expanded="false">
                Administration
              </button>
              <ul class="dropdown-menu dropdown-menu-dark position-absolute" aria-labelledby="dropdownMenu">
                <li><a class="dropdown-item" href="{% url 'benevoles_liste' %}">{{Text.volunteer_list}}</a></li>
                <li><a class="dropdown-item" href="{% url 'benevole_ajoute' %}">{{Text.volunteer_add}}</a></li>
                <li><a class="dropdown-item" href="{% url 'benevole_edite' %}">{{Text.volunteer_mod}}</a></li>
                <li><a class="dropdown-item" href="{% url 'benevole_supprime' %}">{{Text.volunteer_sup}}</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">{{Text.nav_action}}</a></li>
              </ul>
          </li>
        {% endif %}
        {% endcomment %}
      </ul>
    {% endif %}

    <ul class="navbar-nav px-2">
      <li class="nav-item text-nowrap">
        {% if user.is_authenticated %}
          {% if user.is_staff %}
            {# admin django #}
            <div class="btn-group me-2">
              <a class="btn btn-sm btn-outline-danger" href="/admin_ayoulvat/" target="_blank"
                data-bs-toggle="tooltip" data-bs-placement="bottom" title="" >
                {{Text.nav_django_admin}}</a>
            </div>
          {% endif %}

          <div class="btn-group me-2">
            <button type="submit" id="profile" class="btn btn-sm btn-outline-secondary"
              formaction="{% url 'home' %}" form="nav_bar">{{Text.nav_events}}</button>
          </div>
          <!--a class="btn btn-sm btn-outline-secondary" href="{% url 'logout' %}">{{Text.nav_disconnect}}</a-->
        {% else %}
          <a class="btn btn-sm btn-outline-secondary" href="{% url 'login' %}">{{Text.nav_connect}}</a>
        {% endif %}
      </li>
    </ul>
  </nav>                                                 
