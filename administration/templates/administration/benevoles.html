<!-- benevole/personne_list.html -->

{% extends 'administration/base.html' %}
{% load filters_perso %}
{% load bootstrap5 %}

{% block title %}liste des bénévoles{% endblock %}

{% block content %}

<div class="">

    <div class="container">
        <div class="row align-items-end">
            <div class="col-md-12">
                <h2 style="margin-top: 2em;" title="">
                    liste des bénévoles
                </h2>
            </div>
        </div>
    </div>    
    <hr class="border-2 border-top border-dark"> {# barre horizontale #}

    <div class="">

        <div class="col-md-9 ms-sm-auto col-lg-1 px-md-4 pt-3">
            <button style="" class="btn btn-sm" title="ajouter un bénévole" data-bs-toggle="modal" data-bs-target="#modal-benevole-ajoute">
                <i style="color: var(--bs-success)" class="bi bi-plus-square fs-1"></i>
            </button>
        </div>

        {% if Benevoles %}
            {# AFFICHE LES BENEVOLES #}
            <table class="table table-striped"  id="table_benevoles">
                <thead>
                    <tr>
                    <!-- th scope="col">#</th -->
                    <th scope="col">nom</th>
                    <th scope="col">prenom</th>
                    <th scope="col">email</th>
                    <th scope="col">portable</th>
                    <th scope="col">role</th>
                    <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody>
                {% for benevole in Benevoles %}
                    <tr style="vertical-align : middle;">
                    <td>{{benevole.personne.last_name|upper}}</a></td>
                    <td>{{benevole.personne.first_name|capfirst}}</td>
                    <td>{{benevole.personne.email}}</td>
                    <td>{{benevole.personne.portable}}</td>
                    <td>
                        {% for group in benevole.personne.groups.all %}
                            {{ group }}{% if not forloop.last %}, {%endif%}
                        {% endfor %}
                    <td>
                        <div style="display: flex;">
                        {% comment "" %}
                        <a href="#" class="d-block p-3 link-blue text-decoration-none" title="éditer" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Icon-only">
                            <i class="bi-pencil-square fs-3"></i>
                        </a>
                        {% endcomment %}
                        {% if not benevole.personne|has_group:"Administrateur" and not benevole.personne|has_group:"Organisateur" and not benevole.personne|has_group:"Responsable" %}
                            <button style="" class="benevole-supprime btn btn-sm" title="supprimer un bénévole" 
                                data-bs-toggle="modal" data-bs-target="#modal-benevole-supprime"
                                data-id1="{{benevole.personne.UUID}}"
                                data-id2="{{benevole.personne.last_name}}"
                                data-id3="{{benevole.personne.fisrt_name}}">
                                <i style="color: var(--bs-danger)" class="bi bi-x-square fs-6"></i>
                            </button>
                        {% endif %}
                        </div>
                    </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            pas encore de bénévole inscrit
        {% endif %} 
    </div>
</div>

{% include "administration/benevole/modal_ajoute.html" %}
{% include "administration/benevole/modal_supprime.html" %}
{% endblock %}