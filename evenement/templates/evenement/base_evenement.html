<!-- evenement/base_evenement.html --> 
{% extends 'evenement/base.html' %}

{% block base_evenement %}
<!-- affiche le popup d'aide quand on passe sur un element contenant un tooltip -->
<script>
$(document).ready(function(){
  $('[data-bs-toggle="tooltip"]').tooltip();   
});
</script>

    {# affiche les infos du planning choisi  sous la navbar #}
    {% if Planning and Benevole %}
            <figure class="text-center">
                <blockquote class="blockquote">
                {% if  Planning.debut|date:'l j F'|stringformat:"s" ==  Planning.fin|date:'l j F'|stringformat:"s" %}
                    <p class='h5 titre_page'>{{Planning.equipe.nom|upper}} : {{ Planning.debut|date:'l j F' }} de {{ Planning.debut|date:'H:i' }} à {{ Planning.fin|date:'H:i' }}</p>
                {% else %}
                    <p class='h5 titre_page'>{{Planning.equipe.nom|upper}} : {{ Planning.debut|date:'l j F' }} {{ Planning.debut|date:'H:i' }} - {{ Planning.fin|date:'l j F' }} {{ Planning.fin|date:'H:i' }}</p>
                {% endif %}
                </blockquote>
            </figure>
        <hr>
    {% endif %}


    {% if not planning_perso %}
        {# si planning selectionné, on affiche #}
        {% if Planning or PostesCreneaux %}
            {% if Administrateur or Organisateur or Responsable %}
                {% comment "affichage tab postes et benevole" %}
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                            <button class="nav-link active" id="nav-creneaux-tab" data-bs-toggle="tab" 
                                    data-bs-target="#nav-creneaux" type="button" role="tab" 
                                    aria-controls="nav-creneaux" aria-selected="true">Créneaux</button>
                            <button class="nav-link" id="nav-benevoles-tab" data-bs-toggle="tab" 
                                    data-bs-target="#nav-benevoles" type="button" role="tab" 
                                    aria-controls="nav-benevoles" aria-selected="false">Bénévoles</button>    
                        </div>
                    </nav>
                {% endcomment %}
                <div class="tab-content post_display_javascript" id="nav-tabContent">
                    {# postes du planning on affiche que si un planning ou un poste est selectionné #}
                    <div class="tab-pane fade show active post_display_javascript" id="nav-creneaux" 
                        role="tabpanel" aria-labelledby="nav-creneaux-tab">
                            {% include "evenement/page_postes.html" %}
                    </div>
                    {% comment "affichage tab benevole" %}
                    <div class="tab-pane post_display_javascript" id="nav-benevoles" 
                        role="tabpanel" aria-labelledby="nav-benevoles-tab">
                            {% include "evenement/page_benevoles.html" %}
                    </div>
                    {% endcomment %}
                </div>

            {% else %} {# benevoles #}
                <div class="tab-content post_display_javascript" id="nav-tabContent">
                    {% include "evenement/page_postes.html" %}
                </div>
            {% endif %}
        {# bouton de la sidebar planning global utilisé #}
        {% elif planning_global %}
            {% include "evenement/page_planning_evenement.html" %}
        {# une equipe est selectionnée par un benevole, pas de planning ou de poste #}
        {# page par defaut admin: plannings  evenement et equipes #} 
        {% elif Evenement and not Planning and Administrateur or Organisateur or Responsable and not planning_global %} 
            <div class="tab-content post_display_javascript" id="nav-tabContent">
                <div class="tab-pane fade show active post_display_javascript" id="nav-equipes"  
                    role="tabpanel" aria-labelledby="nav-equipes-tab">
                        {% include "evenement/page_equipes.html" %}
                </div>
            </div>
        {# un admin a cliqué arrive de la page liste evenements #}    
        {% else %}
            {% include "evenement/page_planning_evenement.html" %}
        {% endif %}

    {% elif planning_perso %}
        {# si planning perso choisi #}
        <div class="tab-content post_display_javascript" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-equipes"
                role="tabpanel" aria-labelledby="nav-equipes-tab"> 
                {% if equipe_uuid %} 
                    {% include "evenement/page_equipes.html" %}
                {% else %}
                    {% include "evenement/page_planning_perso.html" %}
                {% endif %}
            </div>
        </div>
    {% else %}
        {# page par defaut des benevoles de l'evenement: son planning global #}
        {% if Evenement and Benevole %} 
            <div class="tab-content post_display_javascript" id="nav-tabContent">
                <div class="tab-pane fade show active" id="nav-equipes"
                    role="tabpanel" aria-labelledby="nav-equipes-tab"> 
                        {% include "evenement/page_planning_evenement.html" %}
                </div>
            </div>
        {% endif %}
    {% endif %}
{% endblock base_evenement %}
